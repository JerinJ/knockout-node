define(["require","module"],function(c,a){var h=/([^:])\/+/g;var d=function(k){return k.replace(h,"$1/")};var f=/[^\:\/]*:\/\/([^\/])*/;function e(n,o,m){if(n.indexOf("data:")===0){return n}n=d(n);if(n.match(/^\//)||n.match(f)){return n}var l=m.match(f);var k=o.match(f);if(k&&(!l||l[1]!=k[1]||l[2]!=k[2])){return g(n,o)}else{return b(g(n,o),m)}}function g(m,n){if(m.substr(0,2)=="./"){m=m.substr(2)}var l=n.split("/");var k=m.split("/");l.pop();while(curPart=k.shift()){if(curPart==".."){l.pop()}else{l.push(curPart)}}return l.join("/")}function b(m,n){var l=n.split("/");l.pop();n=l.join("/")+"/";i=0;while(n.substr(i,1)==m.substr(i,1)){i++}while(n.substr(i,1)!="/"){i--}n=n.substr(i+1);m=m.substr(i+1);l=n.split("/");var k=m.split("/");out="";while(l.shift()){out+="../"}while(curPart=k.shift()){out+=curPart+"/"}return out.substr(0,out.length-1)}var j=function(l,q,o,p){q=d(q);o=d(o);var r=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig;var s,m,l;while(s=r.exec(l)){m=s[3]||s[2]||s[5]||s[6]||s[4];var k;if(p&&m.substr(0,1)=="/"){k=p+m}else{k=e(m,q,o)}var n=s[5]||s[6]?1:0;l=l.substr(0,r.lastIndex-m.length-n-1)+k+l.substr(r.lastIndex-n-1);r.lastIndex=r.lastIndex+(k.length-m.length)}return l};j.convertURIBase=e;return j});