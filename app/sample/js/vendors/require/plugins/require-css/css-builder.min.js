define(["require","./normalize"],function(k,g){var l=function(){};if(requirejs.tools){requirejs.tools.useLib(function(p){p(["node/print"],function(q){l=q},function(){})})}var i={};function d(p){if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){try{var s=require.nodeRequire("csso");var q=p.length;p=s.justDoIt(p);l("Compressed CSS output to "+Math.round(p.length/q*100)+"%.");return p}catch(r){l('Compression module not installed. Use "npm install csso -g" to enable.');return p}}l("Compression not supported outside of nodejs environments.");return p}function e(v){if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var q=require.nodeRequire("fs");var t=q.readFileSync(v,"utf8");if(t.indexOf("\uFEFF")===0){return t.substring(1)}return t}else{var t=new java.io.File(v),p=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(t),"utf-8")),u,r;try{u=new java.lang.StringBuffer();r=s.readLine();if(r&&r.length()&&r.charAt(0)===65279){r=r.substring(1)}u.append(r);while((r=s.readLine())!==null){u.append(p).append(r)}return String(u.toString())}finally{s.close()}}}function b(t,s){if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var p=require.nodeRequire("fs");p.writeFileSync(t,s,"utf8")}else{var r=new java.lang.String(s);var q=new java.io.BufferedWriter(new java.io.OutputStreamWriter(new java.io.FileOutputStream(t),"utf-8"));try{q.write(r,0,r.length());q.flush()}finally{q.close()}}}function o(p){return p.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}var n=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g;var f=function(q){var u=e(q);u=g(u,q,j,h);var r=[];var v=[];var w=[];var s;while(s=n.exec(u)){var p=s[4]||s[5]||s[7]||s[8]||s[9];if(p.substr(p.length-5,5)!=".less"&&p.substr(p.length-4,4)!=".css"){p+=".css"}if(p.match(/:\/\//)){continue}if(p.substr(0,1)=="/"&&h){p=h+p}else{p=j+p}r.push(p);v.push(n.lastIndex-s[0].length);w.push(s[0].length)}for(var t=0;t<r.length;t++){(function(A){var x=f(r[A]);u=u.substr(0,v[A])+x+u.substr(v[A]+w[A]);var z=x.length-w[A];for(var y=A+1;y<r.length;y++){v[y]+=z}})(t)}return u};var j;var h;var m;i.load=function(r,t,u,q,v){if(!j){j=q.baseUrl}if(!h){h=q.cssBase}if(q.modules){for(var s=0;s<q.modules.length;s++){if(q.modules[s].layer===undefined){m=s;break}}}i.config=i.config||q;r+=!v?".css":".less";var p=t.toUrl(r);if(p.substr(0,7)=="http://"||p.substr(0,8)=="https://"){return}a[r]=f(p);if(v){a[r]=v(a[r])}u()};i.normalize=function(q,p){if(q.substr(q.length-4,4)==".css"){q=q.substr(0,q.length-4)}return p(q)};var c=[];var a=[];i.write=function(t,p,s,u){if(p.substr(0,7)=="http://"||p.substr(0,8)=="https://"||p.substr(0,2)=="//"){return}var q=p+(!u?".css":".less");c.push(a[q]);var r=false;if(i.config.separateCSS){r=true}if(typeof m=="number"&&i.config.modules[m].separateCSS!==undefined){r=i.config.modules[m].separateCSS}if(r){s.asModule(t+"!"+p,"define(function(){})")}else{s("requirejs.s.contexts._.nextTick = function(f){f()}; require(['css'], function(css) { css.addBuffer('"+q+"'); }); requirejs.s.contexts._.nextTick = requirejs.nextTick;")}};i.onLayerEnd=function(s,t,v){firstWrite=true;var r=false;if(i.config.separateCSS){r=true}if(typeof m=="number"&&i.config.modules[m].separateCSS!==undefined){r=i.config.modules[m].separateCSS}m=null;var q=c.join("");if(r){l("Writing CSS! file: "+t.name+"\n");var u=this.config.appDir?this.config.baseUrl+t.name+".css":i.config.out.replace(/\.js$/,".css");var p=d(g(q,j,u));b(u,p)}else{if(q==""){return}q=o(d(q));s("requirejs.s.contexts._.nextTick = function(f){f()}; require(['css'], function(css) { css.setBuffer('"+q+(v?"', true":"'")+"); }); requirejs.s.contexts._.nextTick = requirejs.nextTick; ")}c=[]};return i});